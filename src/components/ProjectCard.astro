---
import { Calendar, RotateCw, CircleCheck, Archive, Monitor } from '@lucide/astro';

interface Props {
  title: string;
  description: string;
  href: string;
  image?: string;
  tags?: string[];
  status?: 'completed' | 'in-progress' | 'archived';
  date?: string;
}

const { title, description, href, image, tags = [], status, date } = Astro.props;

const statusConfig = {
  completed:    { color: 'var(--tip-color)',     label: 'completed',   Icon: CircleCheck },
  'in-progress':{ color: 'var(--warning-color)', label: 'in progress', Icon: RotateCw },
  archived:     { color: 'var(--text-muted)',     label: 'archived',    Icon: Archive },
};

const st = statusConfig[status || 'completed'];
---

<a href={href} target="_blank" rel="noopener noreferrer" class="project-card">
  {image ? (
    <img src={image} alt={title} class="project-card-image" loading="lazy" />
  ) : (
    <div class="project-card-image-placeholder">
      <Monitor size={32} stroke-width={1} aria-hidden="true" style="opacity:0.3" />
    </div>
  )}
  <div class="project-card-body">
    <div class="project-card-title">{title}</div>
    <div class="project-card-desc">{description}</div>
    {date && (
      <div class="project-card-meta">
        <Calendar size={12} stroke-width={2} aria-hidden="true" />
        {date}
      </div>
    )}
    <div class="project-card-tags">
      {status && (
        <span class="badge" style={`color: ${st.color}; border-color: ${st.color}40; background: ${st.color}12;`}>
          <st.Icon size={10} stroke-width={2.5} aria-hidden="true" />
          {st.label}
        </span>
      )}
      {tags.map(tag => (
        <span class="badge">{tag}</span>
      ))}
    </div>
  </div>
</a>
